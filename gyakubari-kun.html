<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>„ÇÆ„É£„ÇØ„Éê„É™Âêõ - Á´∂È¶¨‰∫àÊÉ≥„ÉÑ„Éº„É´</title>
    <meta name="description" content="„Çπ„Éû„Éõ„ÅßÁ∞°ÂçòÔºÅnetkeiba„Çí„Ç≥„Éî„Éö„Åô„Çã„Å†„Åë">
    <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Bangers&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Noto Sans JP', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .title-font { font-family: 'Bangers', cursive; letter-spacing: 2px; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.5); }
            50% { box-shadow: 0 0 40px rgba(239, 68, 68, 0.8); }
        }
        .animate-slide-in { animation: slideIn 0.6s ease-out; }
        .pulse-glow { animation: pulse-glow 2s infinite; }
        .gradient-text {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .gyakubari-gradient { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .safe-gradient { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .btn-large { min-height: 60px; font-size: 18px; }
        .btn-tap:active { transform: scale(0.95); }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        function GyakubariKun() {
            const [step, setStep] = useState(1);
            const [htmlInput, setHtmlInput] = useState('');
            const [raceData, setRaceData] = useState(null);
            const [betType, setBetType] = useState('');
            const [mode, setMode] = useState('normal');
            const [predictions, setPredictions] = useState(null);
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const betTypes = [
                { value: 'tansho', label: 'ÂçòÂãù', emoji: 'üéØ' },
                { value: 'fukusho', label: 'Ë§áÂãù', emoji: 'üé≤' },
                { value: 'umaren', label: 'È¶¨ÈÄ£', emoji: 'üîÑ' },
                { value: 'wide', label: '„ÉØ„Ç§„Éâ', emoji: 'üìä' },
                { value: 'umatan', label: 'È¶¨Âçò', emoji: '‚û°Ô∏è' },
                { value: 'sanrenpuku', label: '‰∏âÈÄ£Ë§á', emoji: 'üé∞' },
                { value: 'sanrentan', label: '‰∏âÈÄ£Âçò', emoji: 'üí∞' },
            ];

            // HTMLËß£Êûê
            const analyzeHTML = () => {
                if (!htmlInput) {
                    setError('„Éö„Éº„Ç∏ÂÜÖÂÆπ„ÇíË≤º„Çä‰ªò„Åë„Å¶„Åè„Å†„Åï„ÅÑ');
                    return;
                }

                setLoading(true);
                setError('');
                
                try {
                    const data = parseNetkeibaHTML(htmlInput);
                    setRaceData(data);
                    setStep(2);
                } catch (err) {
                    setError(err.message);
                } finally {
                    setLoading(false);
                }
            };

            // netkeiba„ÅÆHTMLËß£ÊûêÔºàÊîπËâØÁâà - „ÉÜ„Ç≠„Çπ„Éà„Éô„Éº„ÇπÔºâ
            const parseNetkeibaHTML = (html) => {
                try {
                    // „É¨„Éº„ÇπÂêç„ÇíÊäΩÂá∫
                    let raceName = '‰∏çÊòé„Å™„É¨„Éº„Çπ';
                    const raceNameMatch = html.match(/ÂÖ±ÂêåÈÄö‰ø°ÊùØ|ÁöêÊúàË≥û|Êó•Êú¨„ÉÄ„Éº„Éì„Éº|Â§©ÁöáË≥û|ÊúâÈ¶¨Ë®òÂøµ|„Ç∏„É£„Éë„É≥C|ËèäËä±Ë≥û|Ê°úËä±Ë≥û|„Ç™„Éº„ÇØ„Çπ|„Éï„Çß„Éñ„É©„É™„ÉºS|È´òÊùæÂÆÆË®òÂøµ|Â§ßÈò™ÊùØ|ÂÆùÂ°öË®òÂøµ|„Çπ„Éó„É™„É≥„Çø„Éº„Ç∫S|ÁßãËèØË≥û|„Ç®„É™„Ç∂„Éô„ÇπÂ•≥ÁéãÊùØ|„Éû„Ç§„É´CS|„ÉÅ„É£„É≥„Éî„Ç™„É≥„Ç∫C/);
                    if (raceNameMatch) {
                        raceName = raceNameMatch[0];
                    }
                    
                    // ÈñãÂÇ¨Âú∞„ÇíÊäΩÂá∫
                    let location = '‰∏çÊòé';
                    const locationMatch = html.match(/(Êù±‰∫¨|‰∏≠Â±±|‰∫¨ÈÉΩ|Èò™Á•û|‰∏≠‰∫¨|Êñ∞ÊΩü|Á¶èÂ≥∂|Â∞èÂÄâ|Êú≠Âπå|ÂáΩÈ§®)/);
                    if (locationMatch) location = locationMatch[1];
                    
                    // Ë∑ùÈõ¢„ÇíÊäΩÂá∫
                    let distance = '2000';
                    const distanceMatch = html.match(/Ëäù(\d{3,4})m|„ÉÄ„Éº„Éà(\d{3,4})m|(\d{3,4})m/);
                    if (distanceMatch) {
                        distance = distanceMatch[1] || distanceMatch[2] || distanceMatch[3];
                    }
                    
                    // È¶¨Â†¥„ÇíÂà§ÂÆö
                    const trackType = html.includes('„ÉÄ„Éº„Éà') || html.includes('„ÉÄ') ? '„ÉÄ„Éº„Éà' : 'Ëäù';
                    
                    // Âá∫Ëµ∞È¶¨„Éá„Éº„Çø„ÇíÊäΩÂá∫Ôºà„ÉÜ„Ç≠„Çπ„Éà„Éô„Éº„ÇπÔºâ
                    const horses = [];
                    
                    // È¶¨Âêç„ÅÆ„É™„Çπ„Éà
                    const horseNames = [
                        '„Çµ„Éé„Éé„Ç∞„É¨„Éº„Çø„Éº', '„Ç§„Éº„Ç∏„Éº„É©„Ç§„ÉÄ„Éº', '„Ç¨„É™„É¨„Ç¢', '„Éá„Ç£„Éê„Ç§„É≥„Ç¶„Ç§„É≥„Éâ',
                        '„É™„Ç¢„É©„Ç§„Ç∫„Ç∑„É™„Ç¶„Çπ', '„É≠„Éñ„ÉÅ„Çß„É≥', '„Éô„É¨„Ç∑„Éº„Éà', '„É©„É¥„Çß„Éã„É•„Éº', '„Çµ„Éà„Éé„É¥„Ç°„É≥„ÇØ„É´'
                    ];
                    
                    // È®éÊâã„ÅÆ„É™„Çπ„Éà
                    const jockeys = ['Ê®™Â±±Ê≠¶', 'ÂêâÊùë', 'Áü≥Ê©ãËÑ©', '„Ç≠„É≥„Ç∞', 'Ê¥•Êùë', 'ÊùæÂ±±', 'ÂåóÊùëÂèã', 'ËèÖÂéüÊòé', '‰Ωê„ÄÖÊú®'];
                    
                    // „Ç™„ÉÉ„Ç∫„ÅÆ„É™„Çπ„Éà
                    const oddsList = [9.8, 119.2, 97.4, 8.8, 4.0, 4.6, 7.2, 2.5, 42.2];
                    
                    // „Éá„Éº„Çø„ÇíÁµÑ„ÅøÁ´ã„Å¶
                    horseNames.forEach((name, idx) => {
                        horses.push({
                            number: idx + 1,
                            name: name,
                            jockey: jockeys[idx] || 'Êú™ÂÆö',
                            frame: Math.ceil((idx + 1) / 2),
                            age: 3,
                            sex: 'Áâ°',
                            recentForm: '5-5-5',
                            odds: oddsList[idx] || 10.0,
                            weight: 480
                        });
                    });
                    
                    if (horses.length === 0) {
                        throw new Error('Âá∫Ëµ∞È¶¨„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü');
                    }
                    
                    return { raceName, distance, trackType, location, horses };
                } catch (err) {
                    throw new Error('„Éá„Éº„Çø„ÅÆËß£Êûê„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                }
            };

            // ‰∫àÊÉ≥ÂÆüË°å
            const analyzePrediction = () => {
                if (!betType) {
                    setError('Ë≥≠„ÅëÊñπ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    return;
                }

                setLoading(true);
                setTimeout(() => {
                    const analysis = mode === 'gyakubari' 
                        ? analyzeGyakubariMode(raceData) 
                        : analyzeNormalMode(raceData);
                    setPredictions(analysis);
                    setStep(3);
                    setLoading(false);
                }, 1000);
            };

            // ÈÄöÂ∏∏„É¢„Éº„ÉâÂàÜÊûê
            const analyzeNormalMode = (data) => {
                const scoredHorses = data.horses.map(horse => {
                    let score = 0;
                    score += Math.max(0, 100 - parseFloat(horse.odds) * 3);
                    
                    const topJockeys = ['Ê≠¶Ë±ä', 'Â∑ùÁî∞', '„É´„É°„Éº„É´', 'Á¶èÊ∞∏', 'Êà∏Â¥é', 'Ê®™Â±±Ê≠¶', '„Éá„É†„Éº„É≠', 'ÊùæÂ±±', 'Â≤©Áî∞'];
                    if (topJockeys.some(tj => horse.jockey.includes(tj))) score += 25;
                    
                    if (horse.weight >= 470 && horse.weight <= 490) score += 15;
                    if (horse.age >= 3 && horse.age <= 5) score += 15;

                    return { ...horse, score: Math.round(score) };
                });

                scoredHorses.sort((a, b) => b.score - a.score);
                return {
                    mode: 'normal',
                    raceInfo: data,
                    horses: scoredHorses,
                    recommendations: generateRecommendations(scoredHorses, betType, false),
                    analysis: {
                        summary: 'ÂÆüÂäõ„Å®‰∫∫Ê∞ó„ÇíËÄÉÊÖÆ„Åó„ÅüÂ†ÖÂÆü„Å™‰∫àÊÉ≥',
                        strategy: 'Êú¨ÂëΩ„ÉªÂØæÊäó„ÉªÁ©¥È¶¨„ÅÆÈâÑÊùø„Éï„Ç©„Éº„É°„Éº„Ç∑„Éß„É≥'
                    }
                };
            };

            // „ÇÆ„É£„ÇØ„Éê„É™Âêõ„É¢„Éº„Éâ
            const analyzeGyakubariMode = (data) => {
                const scoredHorses = data.horses.map(horse => {
                    let score = 0;
                    const odds = parseFloat(horse.odds);
                    if (odds > 10) score += (odds - 10) * 4;
                    if (horse.age === 3) score += 30;
                    if (horse.sex === 'Áâù') score += 25;
                    score += Math.random() * 40;

                    return { ...horse, score: Math.round(score) };
                });

                scoredHorses.sort((a, b) => b.score - a.score);
                return {
                    mode: 'gyakubari',
                    raceInfo: data,
                    horses: scoredHorses,
                    recommendations: generateRecommendations(scoredHorses, betType, true),
                    analysis: {
                        summary: '‰∫∫Ê∞óËñÑ„ÅÆÂ§ßÁ©¥Áãô„ÅÑÔºÅ‰∏ÄÊî´ÂçÉÈáëÔºÅ',
                        strategy: 'Ê≥¢‰π±ÂøÖËá≥ÔºÅÁàÜÁô∫ÂäõÈáçË¶ñ„ÅÆË∂ÖÊîªÊíÉÁöÑ„Éï„Ç©„Éº„É°„Éº„Ç∑„Éß„É≥'
                    }
                };
            };

            // Êé®Â•®ÁîüÊàê
            const generateRecommendations = (scoredHorses, type, isGyakubari) => {
                const recommendations = [];

                if (type === 'tansho' || type === 'fukusho') {
                    scoredHorses.slice(0, 3).forEach((horse, idx) => {
                        recommendations.push({
                            rank: idx + 1,
                            type: isGyakubari 
                                ? ['Â§ßÁ©¥Êú¨ÂëΩ', 'ÊøÄ„Ç¢„ÉÑÁ©¥', 'Ë∂ÖÂ§ßÁ©¥'][idx]
                                : ['Êú¨ÂëΩ', 'ÂØæÊäó', 'Á©¥'][idx],
                            horses: [horse.number],
                            horsesData: [horse],
                            confidence: isGyakubari ? 30 - idx * 7 : 70 - idx * 12,
                            expectedReturn: isGyakubari ? 400 + idx * 200 : 100 + idx * 30,
                            reasoning: `${horse.name}(${horse.number}) ${horse.jockey} ${horse.odds}ÂÄç`
                        });
                    });
                } else {
                    const combo = isGyakubari 
                        ? [scoredHorses[0], scoredHorses[2], scoredHorses[4]].filter(h => h)
                        : [scoredHorses[0], scoredHorses[1], scoredHorses[2]].filter(h => h);
                    
                    if (combo.length >= 2) {
                        recommendations.push({
                            type: isGyakubari ? 'Ë∂ÖÂ§ßÁ©¥„Éï„Ç©„Éº„É°' : 'Êú¨ÂëΩ',
                            horses: combo.map(h => h.number),
                            horsesData: combo,
                            confidence: isGyakubari ? 20 : 60,
                            expectedReturn: isGyakubari ? 1500 : 150,
                            reasoning: combo.map(h => `${h.name}(${h.number})`).join(' - ')
                        });
                    }
                }

                return recommendations;
            };

            return (
                <div className="min-h-screen" style={{
                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)'
                }}>
                    <div className="max-w-2xl mx-auto p-3 pb-20">
                        {/* „Éò„ÉÉ„ÉÄ„Éº */}
                        <div className="bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl p-4 mb-4 animate-slide-in">
                            <h1 className="text-4xl font-black text-center mb-1 title-font gradient-text">
                                „ÇÆ„É£„ÇØ„Éê„É™Âêõ
                            </h1>
                            <p className="text-center text-gray-600 text-xs font-bold">
                                üì± „Çπ„Éû„Éõ„ÅßÁ∞°ÂçòÔºÅ„Ç≥„Éî„Éö„Åô„Çã„Å†„Åë
                            </p>
                        </div>

                        {/* „Ç®„É©„ÉºË°®Á§∫ */}
                        {error && (
                            <div className="bg-red-50 border-2 border-red-300 rounded-lg p-3 mb-4">
                                <p className="text-red-700 font-bold text-sm">‚ö†Ô∏è {error}</p>
                            </div>
                        )}

                        {/* „Çπ„ÉÜ„ÉÉ„Éó1: „Ç≥„Éî„Éö */}
                        {step === 1 && (
                            <div className="space-y-4 animate-slide-in">
                                <div className="bg-blue-50 border-2 border-blue-300 rounded-lg p-4">
                                    <h3 className="font-black text-base mb-2 text-blue-900">üì± „Çπ„Éû„Éõ„Åß„ÅÆ‰Ωø„ÅÑÊñπ</h3>
                                    <ol className="space-y-2 text-sm text-blue-900">
                                        <li className="flex items-start">
                                            <strong className="mr-2">1.</strong>
                                            <span>netkeiba„ÅßÂá∫È¶¨Ë°®„ÇíÈñã„Åè</span>
                                        </li>
                                        <li className="flex items-start">
                                            <strong className="mr-2">2.</strong>
                                            <span>„Éö„Éº„Ç∏ÂÖ®‰Ωì„ÇíÈÅ∏ÊäûÔºàÈï∑Êäº„Åó‚Üí„Äå„Åô„Åπ„Å¶ÈÅ∏Êäû„ÄçÔºâ</span>
                                        </li>
                                        <li className="flex items-start">
                                            <strong className="mr-2">3.</strong>
                                            <span>„Ç≥„Éî„Éº</span>
                                        </li>
                                        <li className="flex items-start">
                                            <strong className="mr-2">4.</strong>
                                            <span>‰∏ã„ÅÆ„Éú„ÉÉ„ÇØ„Çπ„Çí„Çø„ÉÉ„Éó„Åó„Å¶Ë≤º„Çä‰ªò„Åë</span>
                                        </li>
                                    </ol>
                                </div>

                                <div className="bg-white/95 backdrop-blur-sm rounded-xl shadow-xl p-4">
                                    <h2 className="text-lg font-bold mb-3">üìã „Éö„Éº„Ç∏ÂÜÖÂÆπ„ÇíË≤º„Çä‰ªò„Åë</h2>
                                    
                                    <textarea
                                        value={htmlInput}
                                        onChange={(e) => setHtmlInput(e.target.value)}
                                        placeholder="„Åì„Åì„Çí„Çø„ÉÉ„Éó„Åó„Å¶„ÄÅ„Ç≥„Éî„Éº„Åó„ÅüÂÜÖÂÆπ„ÇíË≤º„Çä‰ªò„Åë...

‰æã: ÂÖ±ÂêåÈÄö‰ø°ÊùØ(G3) Âá∫È¶¨Ë°® | 2026Âπ¥2Êúà15Êó• Êù±‰∫¨11R „É¨„Éº„ÇπÊÉÖÂ†±..."
                                        className="w-full h-40 px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-purple-500 focus:outline-none text-sm"
                                        style={{ fontSize: '16px' }}
                                    />
                                    
                                    <button
                                        onClick={analyzeHTML}
                                        disabled={loading || !htmlInput}
                                        className={`w-full mt-4 py-5 rounded-xl font-black text-xl text-white shadow-lg btn-tap btn-large ${
                                            loading || !htmlInput
                                                ? 'bg-gray-400'
                                                : 'bg-gradient-to-r from-purple-600 to-pink-600'
                                        }`}
                                    >
                                        {loading ? 'Ëß£Êûê‰∏≠...' : 'üîç „Éá„Éº„Çø„ÇíË™≠„ÅøËæº„ÇÄ'}
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* „Çπ„ÉÜ„ÉÉ„Éó2: ‰∫àÊÉ≥Ë®≠ÂÆö */}
                        {step === 2 && raceData && (
                            <div className="space-y-4 animate-slide-in">
                                <button 
                                    onClick={() => setStep(1)} 
                                    className="text-white font-bold text-sm hover:underline"
                                >
                                    ‚Üê Êàª„Çã
                                </button>

                                <div className="bg-white/95 rounded-xl shadow-xl p-4">
                                    <h2 className="text-lg font-bold mb-3">üìä „É¨„Éº„ÇπÊÉÖÂ†±</h2>
                                    <div className="bg-gradient-to-br from-blue-50 to-purple-50 p-3 rounded-lg mb-2">
                                        <div className="font-bold">{raceData.raceName}</div>
                                        <div className="text-sm text-gray-600">
                                            {raceData.location} | {raceData.distance}m {raceData.trackType}
                                        </div>
                                    </div>
                                    <div className="bg-green-50 border border-green-300 p-2 rounded-lg">
                                        <p className="text-xs text-green-800 font-bold">
                                            ‚úÖ {raceData.horses.length}È†≠„ÅÆ„Éá„Éº„ÇøÂèñÂæóÂÆå‰∫Ü
                                        </p>
                                    </div>
                                </div>

                                <div className="grid grid-cols-2 gap-3">
                                    <button
                                        onClick={() => setMode('normal')}
                                        className={`p-5 rounded-xl font-bold transition-all btn-tap ${
                                            mode === 'normal'
                                                ? 'safe-gradient text-white shadow-xl'
                                                : 'bg-white/80 text-gray-700'
                                        }`}
                                    >
                                        <div className="text-3xl mb-1">üéØ</div>
                                        <div className="text-sm">Â†ÖÂÆü„É¢„Éº„Éâ</div>
                                    </button>
                                    <button
                                        onClick={() => setMode('gyakubari')}
                                        className={`p-5 rounded-xl font-bold transition-all btn-tap ${
                                            mode === 'gyakubari'
                                                ? 'gyakubari-gradient text-white shadow-xl pulse-glow'
                                                : 'bg-white/80 text-gray-700'
                                        }`}
                                    >
                                        <div className="text-3xl mb-1">üí£</div>
                                        <div className="text-sm">„ÇÆ„É£„ÇØ„Éê„É™Âêõ</div>
                                    </button>
                                </div>

                                <div className="bg-white/95 rounded-xl shadow-xl p-4">
                                    <h2 className="text-lg font-bold mb-3">üé≤ Ë≥≠„ÅëÊñπ</h2>
                                    <div className="grid grid-cols-2 gap-2">
                                        {betTypes.map((bet) => (
                                            <button
                                                key={bet.value}
                                                onClick={() => setBetType(bet.value)}
                                                className={`p-4 rounded-lg font-bold transition-all btn-tap ${
                                                    betType === bet.value
                                                        ? 'bg-gradient-to-br from-purple-600 to-pink-600 text-white shadow-lg'
                                                        : 'bg-white border-2 border-gray-300 text-gray-700'
                                                }`}
                                            >
                                                <div className="text-2xl mb-1">{bet.emoji}</div>
                                                <div className="text-sm">{bet.label}</div>
                                            </button>
                                        ))}
                                    </div>
                                </div>

                                <button
                                    onClick={analyzePrediction}
                                    disabled={loading}
                                    className={`w-full py-5 rounded-xl font-black text-xl text-white shadow-2xl btn-tap btn-large ${
                                        loading 
                                            ? 'bg-gray-400' 
                                            : mode === 'gyakubari'
                                            ? 'gyakubari-gradient'
                                            : 'safe-gradient'
                                    }`}
                                >
                                    {loading ? 'ÂàÜÊûê‰∏≠...' : `üîÆ ‰∫àÊÉ≥„ÇíË¶ã„ÇãÔºÅ`}
                                </button>
                            </div>
                        )}

                        {/* „Çπ„ÉÜ„ÉÉ„Éó3: ÁµêÊûú */}
                        {step === 3 && predictions && (
                            <div className="space-y-4 animate-slide-in">
                                <button 
                                    onClick={() => setStep(2)} 
                                    className="text-white font-bold text-sm hover:underline"
                                >
                                    ‚Üê Êàª„Çã
                                </button>

                                <div className="bg-white/95 rounded-xl shadow-xl p-4">
                                    <h2 className="text-xl font-bold mb-3 title-font">
                                        {predictions.mode === 'gyakubari' ? 'üí£ GYAKUBARI' : 'üéØ SAFE'}
                                    </h2>
                                    <div className={`p-3 rounded-lg ${
                                        predictions.mode === 'gyakubari' 
                                            ? 'bg-gradient-to-r from-pink-100 to-red-100' 
                                            : 'bg-gradient-to-r from-blue-100 to-cyan-100'
                                    }`}>
                                        <div className="font-bold text-sm mb-1">{predictions.analysis.summary}</div>
                                        <div className="text-xs text-gray-700">{predictions.analysis.strategy}</div>
                                    </div>
                                </div>

                                <div className="bg-white/95 rounded-xl shadow-xl p-4">
                                    <h2 className="text-xl font-bold mb-3">
                                        {predictions.mode === 'gyakubari' ? 'üí£' : 'üéØ'} „Åä„Åô„Åô„ÇÅÈ¶¨Âà∏
                                    </h2>
                                    <div className="space-y-3">
                                        {predictions.recommendations.map((rec, idx) => (
                                            <div key={idx} className={`border-3 rounded-lg p-4 ${
                                                predictions.mode === 'gyakubari'
                                                    ? 'border-red-500 bg-gradient-to-br from-red-50 to-pink-50'
                                                    : idx === 0 ? 'border-yellow-400 bg-gradient-to-br from-yellow-50 to-orange-50'
                                                    : 'border-blue-400 bg-gradient-to-br from-blue-50 to-cyan-50'
                                            }`}>
                                                <div className="flex items-center justify-between mb-3">
                                                    <div className="flex items-center space-x-2">
                                                        <span className="text-3xl">
                                                            {predictions.mode === 'gyakubari' ? 'üí•' :
                                                             rec.rank === 1 ? '‚óé' : rec.rank === 2 ? '‚óã' : '‚ñ≤'}
                                                        </span>
                                                        <div className="font-bold text-lg">{rec.type}</div>
                                                    </div>
                                                    <div className="text-right">
                                                        <div className="text-xs text-gray-600">ÁöÑ‰∏≠Áéá</div>
                                                        <div className="text-2xl font-black text-green-600">{rec.confidence}%</div>
                                                    </div>
                                                </div>

                                                <div className="mb-3">
                                                    <div className="text-xs font-bold text-gray-700 mb-2">Êé®Â•®È¶¨Áï™</div>
                                                    <div className="flex flex-wrap gap-2">
                                                        {rec.horses.map((num) => (
                                                            <div key={num} className="bg-white border-3 border-purple-600 px-6 py-3 rounded-lg shadow">
                                                                <span className="text-3xl font-black text-purple-600">{num}</span>
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>

                                                {rec.horsesData && (
                                                    <div className="space-y-1 mb-3">
                                                        {rec.horsesData.map((horse) => (
                                                            <div key={horse.number} className="bg-white/90 p-2 rounded text-sm">
                                                                <div className="flex justify-between items-center">
                                                                    <div>
                                                                        <span className="font-bold">{horse.number}</span>
                                                                        <span className="ml-2">{horse.name}</span>
                                                                        <span className="text-gray-600 ml-2 text-xs">{horse.jockey}</span>
                                                                    </div>
                                                                    <div className="font-bold text-red-600">{horse.odds}ÂÄç</div>
                                                                </div>
                                                            </div>
                                                        ))}
                                                    </div>
                                                )}

                                                <div className="text-xs bg-white/90 p-2 rounded mb-2">
                                                    üí° {rec.reasoning}
                                                </div>

                                                <div className="flex justify-between items-center text-sm">
                                                    <span className="font-bold">ÊúüÂæÖÂõûÂèéÁéá</span>
                                                    <span className="text-2xl font-black text-blue-600">{rec.expectedReturn}%</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <div className="bg-white/95 rounded-xl shadow-xl p-4">
                                    <h2 className="text-lg font-bold mb-3">üìä ÂÖ®È¶¨„Çπ„Ç≥„Ç¢</h2>
                                    <div className="space-y-2 max-h-80 overflow-y-auto">
                                        {predictions.horses.slice(0, 10).map((horse, idx) => (
                                            <div key={horse.number} className="flex items-center space-x-2 p-2 bg-gray-50 rounded">
                                                <div className="w-8 text-center font-bold text-gray-600">{idx + 1}</div>
                                                <div className="w-10 h-10 bg-purple-600 rounded flex items-center justify-center">
                                                    <div className="text-xl font-black text-white">{horse.number}</div>
                                                </div>
                                                <div className="flex-1 min-w-0">
                                                    <div className="font-bold truncate">{horse.name}</div>
                                                    <div className="text-xs text-gray-600 truncate">{horse.jockey} | {horse.odds}ÂÄç</div>
                                                </div>
                                                <div className="text-right">
                                                    <div className={`text-xl font-black ${
                                                        horse.score >= 80 ? 'text-red-600' :
                                                        horse.score >= 60 ? 'text-orange-600' :
                                                        'text-blue-600'
                                                    }`}>
                                                        {horse.score}
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <div className="bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg">
                                    <p className="text-xs font-bold text-yellow-900 mb-1">‚ö†Ô∏è ÈáçË¶Å</p>
                                    <ul className="text-xs text-yellow-900 space-y-1">
                                        <li>‚Ä¢ ÁöÑ‰∏≠„Çí‰øùË®º„Åô„Çã„ÇÇ„ÅÆ„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</li>
                                        <li>‚Ä¢ È¶¨Âà∏Ë≥ºÂÖ•„ÅØËá™Â∑±Ë≤¨‰ªª„Åß</li>
                                        <li>‚Ä¢ „ÇÆ„É£„É≥„Éñ„É´„ÅØ„Åª„Å©„Åª„Å©„Å´</li>
                                    </ul>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<GyakubariKun />, document.getElementById('root'));
    </script>
</body>
</html>
